---
title: effective java 3/E - 4장. 클래스와 인터페이스
tags: 
 - Java
key: 9
---

# 4장 클래스와 인터페이스

##### 4장에서 배울 내용

* 클래스와 인터페이스를 사용하여 쓰기 편하고, 견고하며, 유연하게 만드는 방법



## 아이템 15: 클래스와 멤버의 접근 권한을 최소화하라

잘 설계된 컴포넌트는 클래스 내부 데이터와 내부 구현 정보를 외부로 부터 얼마나 잘 숨겼느냐의 여부이다. 잘 설계된 컴포넌트는 모든 내부 구현 내부를 완벽히 숨겨, 구현과 API를 깔끔히 분리한다. 정보은닉, 캡슐화라고 하는 이 개념은 소프트웨어 설계의 근간이 되는 원리이다.

##### 정보 은닉의 장점

* **시스템 개발 속도를 높인다.** 여러 컴포넌트를 병렬로 개발할 수 있기 때문이다.
* **시스템 관리 비용을 낮춘다.** 각 컴포넌트를 더 빨리 파악하여 디버깅할 수 있고, 다른 컴포넌트로 교체하는 부담도 적기 때문이다.
* **정보 은닉 자체가 성능을 높여주지는 않지만, 성능 최적화에 도움을 준다.** 완성된 시스템을 프로파일링해 최적화할 컴포넌트를 정한 다음, 다른 컴포넌트에 영향을 주지 않고 해당 컴포넌트만 최적화할 수 있기 때문이다.
* **소프트웨어 재사용성을 높인다.** 외부에 거의 의존하지 않고 독자적으로 동작할 수 있는 컴포넌트라면 그 컴포넌트와 함께 개발되지 않은 낯선 환경에서도 유용하게 쓰일 가능성이 크기 때문이다.
* **큰 시스템을 제작하는 난이도를 낮춰준다.** 시스템 전체가 아직 완성되지 않은 상태에서도 개별 컴포넌트의 동작을 검증할 수 있기 때문이다.

##### 자바의 정보 은닉을 위한 다양한 장치

 접근 제어 메커니즘은 클래스, 인터페이스, 멤버의 접근성(접근 허용 범위)를 명시한다. 각 요소의 접근성은 그 요소가 선언된 위치와 접근 제한자(private, protected, public)으로 정해진다. 이 접근 제한자를 제대로 활용하는 것이 정보 은닉의 핵심이다.

기본 원칙은 **모든 클래스와 멤버의 접근성을 가능한 한 좁혀야 한다.**

##### 톱레벨 클래스나 인터페이스의 접근 수준은 public과 package-private(default)만 가능하다.

* public 선언: 공개 API
  * API가 되면 하위 호환을 위해 영원히 관리가 필요하다.
* package-private 선언: 해당 패키지 내에서만 사용 가능. 외부에서 쓸일이 없다면 사용하자.
  * 클라이언트에 아무런 피해 없이 다음 릴리스에서 수정, 교체, 제거 가능하다.
  * 클래스 내 private static으로 중첩 시켜보자.
  * public 일 필요가 없는 클래스에 선언



##### 멤버(필드, 메서드, 중첩 클래스, 중첩 인터페이스)에 부여할 수 있는 접근 수준

* private: 멤버를 선언한 톱레벨 클래스에서만 접근 가능
* package-private: 멤버가 소속된 패키지 안의 모든 클래스에서 접근 가능
* protected: package-private을 포함하고 선언한 클래스의 하위 클래스에서 접근 가능
* public: 모든 클래스에서 접근 가능



##### 클래스의 멤버 접근 관리

* 클래스의 공개 API를 세심히 설계한 후, 그 외의 모든 멤버는 private으로 만들자. 같은 패키지의 다른 클래스가 접근해야 할 경우 package-private으로 풀어준다.

* public 클래스의 경우 멤버를 package-private에서 protected로 바꾸면 공개 API가 되어 영원히 지원되어야 한다.

* 상위 클래스의 메서드를 재정의할 때는 접근 수준을 상위 클래스에서보다 좁게 설정할 수 없다. 이 제약은 상위 클래스의 인스턴스는 하위 클래스의 인스턴스로 대체해 사용할 수 있어야 한다는 규칙(리스코프 치환 원칙)을 지키기 위해 필요하다.

* public 클래스의 인스턴스 필드는 되도록 public이 아니어야 한다.

  * final이 아닌 필드가 public이라면 값을 제한할 힘을 잃게 된다.
  * 불변식을 보장할 수 없게 된다.
  * public 가변 필드를 갖으면 일반적으로 스레드 안전(thread-safe)하지 않다.

* 상수의 경우 public static final 필드로 공개 가능하다.

  * 배열은 static final로 두거나 반환하는 접근자 메서드를 제공해서는 안된다. 내용을 수정할 수 있게 된다.

    해결 법: 

    1. private 배열을 만들로 만들고 public 불변 리스트를 추가하여 사용

    2. 배열을 private로 만들고 clone으로 복사본을 반환

##### 핵심 정리

> 프로그램 요소의 접근성은 가능한 한 최소한으로 하라. 꼭 필요한 것만 골라 최소한의 public API를 설계하자. 그 외엔는 클래스, 인터페이스, 멤버가 의도치 않게 API로 공개 되는 일이 없도록 해야 한다. public 클래스는 상수용 public static final 필드 외에는 어떠한 public 필드도 가져서는 안된다. public static final 필드가 참조하는 객체가 불변인지 확인하라.



___



## 아이템 16: public 클래스에서는 public 필드가 아닌 접근자 메서드를 사용하라
